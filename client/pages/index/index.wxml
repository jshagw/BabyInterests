<!--index.wxml-->
<view class="container">
    <!-- 用户登录测试 -->
    <view class="userinfo" bindtap="login">
        <image
            class="userinfo-avatar"
            src="{{logged ? userInfo.avatarUrl : './user-unlogin.png'}}"
            background-size="cover"
        ></image>
        <!-- 需要使用 button 来授权登录 -->
        <view wx:if="{{canIUse}}">
            <button wx:if="{{!logged}}" open-type="getUserInfo">授权登录</button>
            <text class='userinfo-nickname' wx:if="{{logged}}">{{userInfo.nickName}}</text>
        </view>
        <view wx:else>请升级微信版本</view>
    </view>
    <!--
    <view>
      <button bindtap='getOpenId'>获取openid</button>
    </view>
    -->

    <view class="userinfo">
      <image class="userinfo-avatar" src="./user-unlogin.png" background-size="cover">
      </image>
      <button wx:if="{{requestBabyInfoFailed}}" bindtap='getBabyInfo'>获取宝宝信息</button>
      <navigator wx:elif="{{babyInfo.is_creator}}" 
                url="../AddBaby/AddBaby" 
                hover-class="navigator-hover"
      >{{babyInfo.hasBaby ? babyInfo.name : "点击设置我的宝宝"}}</navigator>
      <text wx:else>{{babyInfo.name}}</text>
    </view>

    <view class="userinfo">
      <image class="userinfo-avatar" src="./user-unlogin.png" background-size="cover">
      </image>
      <navigator url="../CurrentCourse/CurrentCourse" hover-class="navigator-hover">
        今日课程
      </navigator>
    </view>
</view>
